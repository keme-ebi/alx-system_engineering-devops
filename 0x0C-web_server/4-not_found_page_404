#!/usr/bin/env bash
# configures nginx server to redirect to another page
sudo apt update
sudo apt install -y nginx


echo "server {
    listen 80;

    location / {
        return 200 'Hello World!';
    }
}" > /etc/nginx/sites-available/default

sudo sed -i "/listen 80;/a \    server_name _;\n\n    location \/redirect_me {\n\treturn 301 https:\/\/youtube.com\/;\n    }\n    error_page 404 \/404.html;\n    location = \/404.html {\n\troot \/usr\/share\/nginx\/html;\n\tinternal;\n\treturn 404 \"Ceci n\'est pas une page\";\n    }" /etc/nginx/sites-available/default
sudo service nginx restart
sudo service nginx reload
