#!/usr/bin/env bash
# configures nginx server to have custom error 404 page
sudo apt update
sudo apt install -y nginx

sudo service nginx start

echo "server {
    listen 80;

    location / {
        return 200 'Hello World!';
    }
}" > /etc/nginx/sites-available/default

sudo sed -i "/location \/ {/a \\\tlocation \/redirect_me {\n\t\treturn 301 https:\/\/youtube.com\/;\n\t}\n\terror_page 404 \/custom_404.html;\n\tlocation = \/custom_404.html {\n\t\treturn 404 \"Ceci n'est pas une page\";\n\t}" /etc/nginx/sites-available/default

sudo service nginx restart
sudo service nginx reload
