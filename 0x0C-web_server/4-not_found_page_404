#!/usr/bin/env bash
# configures nginx server to redirect to another page
sudo apt update
sudo apt install -y nginx

sudo service nginx start

echo "Ceci n'est pas une page" | sudo tee /var/www/html/custom_404.html

echo "server {
    listen 80;

    location / {
        return 200 'Hello World!';
    }
}" > /etc/nginx/sites-available/default

sudo sed -i "/location \/ {/a \\\tlocation \/redirect_me {\n\t\treturn 301 https:\/\/youtube.com\/;\n\t}\n\terror_page 404 \/404.html;\n\tlocation = \/404.html {\n\t\tinternal;\n\t}" /etc/nginx/sites-available/default

sudo service nginx restart
sudo service nginx reload
